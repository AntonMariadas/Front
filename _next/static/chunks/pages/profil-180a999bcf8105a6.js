(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[738],{7329:function(e,s,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/profil",function(){return r(2519)}])},3892:function(e,s,r){"use strict";var t=r(5893),n=r(7814),a=r(1436);s.Z=function(e){var s=e.message;return(0,t.jsxs)("div",{className:"alert alert-dismissible alert-danger text-center mt-5",children:[(0,t.jsxs)("strong",{children:[s,"  "]}),(0,t.jsx)(n.G,{icon:a.NBC})]})}},2949:function(e,s,r){"use strict";var t=r(5893),n=r(1163),a=r(7294),i=r(9531);function c(e,s,r){return s in e?Object.defineProperty(e,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[s]=r,e}s.Z=function(e){return function(s){var r=(0,a.useContext)(i.Z).authToken,o=(0,n.useRouter)();return r?(0,t.jsx)(e,function(e){for(var s=1;s<arguments.length;s++){var r=null!=arguments[s]?arguments[s]:{},t=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),t.forEach((function(s){c(e,s,r[s])}))}return e}({},s)):(o.replace("/"),null)}}},98:function(e,s,r){"use strict";var t=r(5893),n=r(9669),a=r.n(n),i=r(7294),c=r(9531),o=r(7814),l=r(1436),d=r(4155);s.Z=function(e){var s=e.idUser,r=d.env.NEXT_PUBLIC_SPRINGBOOT_API,n=(0,i.useContext)(c.Z).authToken,m=(0,i.useState)([]),u=m[0],h=m[1],p=(0,i.useState)(!1),x=p[0],f=p[1];(0,i.useEffect)((function(){a().get("".concat(r,"/api/v1/accounts/").concat(s,"/history"),{headers:{Authorization:"Bearer ".concat(n)}}).then((function(e){return h(e.data)})).catch((function(e){return console.log(e)}))}),[x]);return(0,t.jsx)("div",{className:"table-responsive",children:(0,t.jsxs)("table",{className:"table table-hover",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{scope:"col",children:"Entreprise"}),(0,t.jsx)("th",{scope:"col",children:"Domaine"}),(0,t.jsx)("th",{scope:"col",children:"Profil"}),(0,t.jsx)("th",{scope:"col",children:"Siret"}),(0,t.jsx)("th",{scope:"col",children:"Adresse"}),(0,t.jsx)("th",{scope:"col",children:"Site"}),(0,t.jsx)("th",{scope:"col",children:"Candidat\xe9"}),(0,t.jsx)("th",{scope:"col",children:"Relanc\xe9"}),(0,t.jsx)("th",{scope:"col",children:"Action"})]})}),(0,t.jsx)("tbody",{children:u.map((function(e){return(0,t.jsxs)("tr",{className:"table-light",children:[(0,t.jsx)("th",{scope:"row",children:e.name}),(0,t.jsx)("td",{children:e.field}),(0,t.jsx)("td",{children:e.profile}),(0,t.jsx)("td",{children:e.siret}),(0,t.jsx)("td",{children:e.address.toLowerCase()}),(0,t.jsx)("td",{children:e.website?e.website:"Non communiqu\xe9"}),(0,t.jsx)("td",{className:"text-success",children:e.applicationDate}),(0,t.jsx)("td",{className:"text-danger",children:e.relaunchDate}),(0,t.jsx)("td",{children:(0,t.jsx)("button",{type:"button",className:"btn btn-outline-danger btn-sm",onClick:function(){return t=e.id,void a().delete("".concat(r,"/api/v1/accounts/").concat(s,"/history/").concat(t),{headers:{Authorization:"Bearer ".concat(n)}}).then((function(){return f(!x)})).catch((function(e){return console.log(e)}));var t},children:(0,t.jsx)(o.G,{icon:l.NBC})})})]},e.id)}))})]})})}},1395:function(e,s,r){"use strict";var t=r(5893),n=r(7814),a=r(1436);s.Z=function(e){var s=e.message;return(0,t.jsxs)("div",{className:"alert alert-dismissible alert-success text-center mt-5",children:[(0,t.jsxs)("strong",{children:[s,"  "]}),(0,t.jsx)(n.G,{icon:a.LEp})]})}},2519:function(e,s,r){"use strict";r.r(s),r.d(s,{default:function(){return g}});var t=r(5893),n=r(5666),a=r.n(n),i=(r(9008),r(7536)),c=r(9531),o=r(7294),l=r(9669),d=r.n(l),m=r(1395),u=r(3892),h=r(4155);function p(e,s,r,t,n,a,i){try{var c=e[a](i),o=c.value}catch(l){return void r(l)}c.done?s(o):Promise.resolve(o).then(t,n)}function x(e){return function(){var s=this,r=arguments;return new Promise((function(t,n){var a=e.apply(s,r);function i(e){p(a,t,n,i,c,"next",e)}function c(e){p(a,t,n,i,c,"throw",e)}i(void 0)}))}}function f(e,s,r){return s in e?Object.defineProperty(e,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[s]=r,e}function j(e){for(var s=1;s<arguments.length;s++){var r=null!=arguments[s]?arguments[s]:{},t=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),t.forEach((function(s){f(e,s,r[s])}))}return e}var b=function(){var e=h.env.NEXT_PUBLIC_SPRINGBOOT_API,s=h.env.NEXT_PUBLIC_GEOCODE_API_KEY,r=JSON.parse(sessionStorage.getItem("authToken")),n=(0,o.useState)(!1),l=n[0],p=n[1],f=(0,o.useState)(!1),b=f[0],N=f[1],v=(0,o.useContext)(c.Z),g=v.user,y=v.setUser,w={lastName:g.lastName,firstName:g.firstName,profile:g.profile,number:g.number,road:g.road,city:g.city,postCode:g.postCode},C=(0,i.cI)({defaultValues:w}),q=C.register,P=C.handleSubmit,O=C.watch,L=C.reset,_=C.formState.errors;O();var S=x(a().mark((function e(r,t,n,i){var c,o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c="http://api.positionstack.com/v1/forward?access_key=".concat(s,"&query=").concat(r," ").concat(t," ").concat(n," ").concat(i,"&country=FR"),e.prev=1,e.next=4,d().get(c);case 4:return o=e.sent,e.abrupt("return",o.data);case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])}))),E=x(a().mark((function s(t){var n,i;return a().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,S(t.number,t.road,t.postCode,t.city);case 2:n=s.sent,i={firstName:t.firstName,lastName:t.lastName,email:g.email,password:t.password,profile:t.profile,number:t.number,road:t.road,postCode:t.postCode,city:t.city,latitude:n.data[0].latitude,longitude:n.data[0].longitude},L(),d().put("".concat(e,"/api/v1/accounts/").concat(g.id),i,{headers:{Authorization:"Bearer ".concat(r)}}).then((function(){localStorage.removeItem("user"),localStorage.setItem("user",JSON.stringify(i)),y(i),p(!0),setTimeout((function(){p(!1)}),2e3)})).catch((function(e){console.log(e),N(!0),setTimeout((function(){N(!1)}),2e3)}));case 6:case"end":return s.stop()}}),s)})));return(0,t.jsx)("div",{children:(0,t.jsx)("section",{className:"h-100 h-custom gradient-custom-2",children:(0,t.jsx)("form",{onSubmit:P(E),children:(0,t.jsx)("div",{className:"container h-100",children:(0,t.jsx)("div",{className:"row d-flex justify-content-center align-items-center h-100 mb-5",children:(0,t.jsxs)("div",{className:"col-12",children:[(0,t.jsx)("div",{className:"card card-registration card-registration-2",style:{borderRadius:"15px"},children:(0,t.jsx)("div",{className:"card-body p-0",children:(0,t.jsxs)("div",{className:"row g-0",children:[(0,t.jsx)("div",{className:"col-lg-6",children:(0,t.jsxs)("div",{className:"p-5",style:{background:"lavender"},children:[(0,t.jsx)("h3",{className:"fw-bold mb-5",children:"Identit\xe9"}),(0,t.jsxs)("div",{className:"row",children:[(0,t.jsx)("div",{className:"col-md-6 mb-4 pb-2",children:(0,t.jsxs)("div",{className:"form-outline",children:[(0,t.jsx)("label",{htmlFor:"lastName",children:"Nom"}),(0,t.jsx)("input",j({type:"text",id:"lastName",className:"form-control form-control-md ".concat(_.lastname?"is-invalid":"")},q("lastName",{required:!0,minLength:2}))),_.lastName&&"required"==_.lastName.type&&(0,t.jsx)("span",{className:"badge bg-danger",children:"Le nom est requis"}),_.lastName&&"minLength"==_.lastName.type&&(0,t.jsx)("span",{className:"badge bg-warning",children:"Deux caract\xe8res minimum"})]})}),(0,t.jsx)("div",{className:"col-md-6 mb-4 pb-2",children:(0,t.jsxs)("div",{className:"form-outline",children:[(0,t.jsx)("label",{htmlFor:"firstName",children:"Pr\xe9nom"}),(0,t.jsx)("input",j({type:"text",id:"firstName",className:"form-control form-control-md ".concat(_.firstname?"is-invalid":"")},q("firstName",{required:!0,minLength:2}))),_.firstName&&"required"==_.firstName.type&&(0,t.jsx)("span",{className:"badge bg-danger",children:"Le pr\xe9nom est requis"}),_.firstName&&"minLength"==_.firstName.type&&(0,t.jsx)("span",{className:"badge bg-warning",children:"Deux caract\xe8res minimum"})]})})]}),(0,t.jsx)("div",{className:"mb-4 pb-2",children:(0,t.jsxs)("div",{className:"form-outline",children:[(0,t.jsx)("label",{htmlFor:"password",children:"Mot de passe"}),(0,t.jsx)("input",j({type:"password",id:"password",className:"form-control form-control-md ".concat(_.password?"is-invalid":"")},q("password",{required:!0,minLength:8}))),_.password&&"required"==_.password.type&&(0,t.jsx)("span",{className:"badge bg-danger",children:"Le mot de passe est requis"}),_.password&&"minLength"==_.password.type&&(0,t.jsx)("span",{className:"badge bg-warning",children:"Huit caract\xe8res minimum"})]})}),(0,t.jsx)("div",{className:"mb-4 pb-2",children:(0,t.jsxs)("div",{className:"form-outline",children:[(0,t.jsx)("label",{htmlFor:"confirmPassword",children:"Confirmation"}),(0,t.jsx)("input",j({type:"password",id:"confirmPassword",className:"form-control form-control-md ".concat(_.confirmPassword?"is-invalid":"")},q("confirmPassword",{required:!0,validate:function(e){return e==O("password")}}))),_.confirmPassword&&"required"==_.confirmPassword.type&&(0,t.jsx)("span",{className:"badge bg-danger",children:"La confirmation est requise"}),_.confirmPassword&&"required"!==_.confirmPassword.type&&(0,t.jsx)("span",{className:"badge bg-warning",children:"Les mots de passe doivent \xeatre identiques"})]})}),(0,t.jsx)("div",{className:"mb-4 pb-2",children:(0,t.jsxs)("div",{className:"form-outline",children:[(0,t.jsx)("label",{htmlFor:"email",children:"Poste recherch\xe9"}),(0,t.jsxs)("select",j({className:"form-select form-select-md"},q("profile"),{children:[(0,t.jsx)("option",{value:"administration",children:"Administration de syst\xe8mes d'information"}),(0,t.jsx)("option",{value:"consultant",children:"Conseil et ma\xeetrise d'ouvrage en syst\xe8mes d'information"}),(0,t.jsx)("option",{value:"defense",children:"D\xe9fense et conseil juridique"}),(0,t.jsx)("option",{value:"direction",children:"Direction des syst\xe8mes d'information"}),(0,t.jsx)("option",{value:"developpement",children:"Etudes et d\xe9veloppement informatique"}),(0,t.jsx)("option",{value:"support",children:"Expertise et support en syst\xe8mes d'information"}),(0,t.jsx)("option",{value:"maintenance",children:"Maintenance informatique et bureautique"}),(0,t.jsx)("option",{value:"production",children:"Production et exploitation de syst\xe8mes d'information"}),(0,t.jsx)("option",{value:"redaction",children:"R\xe9daction technique"})]}))]})})]})}),(0,t.jsx)("div",{className:"col-lg-6",style:{borderTopRightRadius:"15px",borderBottomRightRadius:"15px"},children:(0,t.jsxs)("div",{className:"p-5",children:[(0,t.jsx)("h3",{className:"fw-bold mb-5",children:"Adresse"}),(0,t.jsx)("div",{className:"mb-4 pb-2",children:(0,t.jsxs)("div",{className:"form-outline form-white",children:[(0,t.jsx)("label",{htmlFor:"number",children:"Num\xe9ro"}),(0,t.jsx)("input",j({type:"text",id:"number",className:"form-control form-control-md ".concat(_.number?"is-invalid":"")},q("number",{required:!0,min:1}))),_.number&&"required"==_.number.type&&(0,t.jsx)("span",{className:"badge bg-danger",children:"Le num\xe9ro est requis"}),_.number&&"min"==_.number.type&&(0,t.jsx)("span",{className:"badge bg-warning",children:"Num\xe9ro sup\xe9rieur \xe0 0 attendu"})]})}),(0,t.jsx)("div",{className:"mb-4 pb-2",children:(0,t.jsxs)("div",{className:"form-outline form-white",children:[(0,t.jsx)("label",{htmlFor:"road",children:"Nom de la voie"}),(0,t.jsx)("input",j({type:"text",id:"road",className:"form-control form-control-md ".concat(_.road?"is-invalid":"")},q("road",{required:!0,minLength:2}))),_.road&&"required"==_.road.type&&(0,t.jsx)("span",{className:"badge bg-danger",children:"La voie est requise"}),_.road&&"minLength"==_.road.type&&(0,t.jsx)("span",{className:"badge bg-warning",children:"Deux caract\xe8res minimum"})]})}),(0,t.jsxs)("div",{className:"row",children:[(0,t.jsx)("div",{className:"col-md-5 mb-4 pb-2",children:(0,t.jsxs)("div",{className:"form-outline form-white",children:[(0,t.jsx)("label",{htmlFor:"postCode",children:"Code postal"}),(0,t.jsx)("input",j({type:"text",id:"postCode",className:"form-control form-control-md ".concat(_.postCode?"is-invalid":"")},q("postCode",{required:!0,min:11111,max:99999}))),_.postCode&&"required"==_.postCode.type&&(0,t.jsx)("span",{className:"badge bg-danger",children:"Le code postal est requis"}),_.postCode&&"min"==_.postCode.type&&(0,t.jsx)("span",{className:"badge bg-warning",children:"Cinq chiffres attendus"}),_.postCode&&"max"==_.postCode.type&&(0,t.jsx)("span",{className:"badge bg-warning",children:"Cinq chiffres attendus"})]})}),(0,t.jsx)("div",{className:"col-md-7 mb-4 pb-2",children:(0,t.jsxs)("div",{className:"form-outline form-white",children:[(0,t.jsx)("label",{htmlFor:"city",children:"Ville"}),(0,t.jsx)("input",j({type:"text",id:"city",className:"form-control form-control-md ".concat(_.city?"is-invalid":"")},q("city",{required:!0,minLength:2}))),_.city&&"required"==_.city.type&&(0,t.jsx)("span",{className:"badge bg-danger",children:"Le code postal est requis"}),_.city&&"minLength"==_.city.type&&(0,t.jsx)("span",{className:"badge bg-warning",children:"Deux caract\xe8res minimum"})]})})]}),(0,t.jsx)("div",{className:"d-grid gap-2 mt-4",children:(0,t.jsx)("button",{className:"btn btn-lg btn-primary",type:"submit",children:"Modifier"})})]})})]})})}),l&&(0,t.jsx)(m.Z,{message:"Profil mis \xe0 jour !"}),b&&(0,t.jsx)(u.Z,{message:"Erreur lors de la mise \xe0 jour"})]})})})})})})},N=function(){var e=(0,o.useContext)(c.Z).user;return(0,t.jsx)("div",{className:"text-center",children:(0,t.jsx)("div",{className:"card",children:(0,t.jsxs)("div",{className:"card-body",children:[(0,t.jsxs)("h4",{className:"card-title",children:[e.firstName," ",e.lastName]}),(0,t.jsx)("h6",{className:"card-subtitle mb-2 text-muted",children:e.email}),(0,t.jsxs)("p",{className:"card-text",children:[e.number," ",e.road," ",(0,t.jsx)("br",{}),e.postCode," ",e.city]}),(0,t.jsx)("h6",{className:"text-primary",children:e.profile.toUpperCase()})]})})})},v=r(98),g=(0,r(2949).Z)((function(){var e=(0,o.useContext)(c.Z).user;return(0,t.jsxs)("div",{className:"my-5",children:[(0,t.jsxs)("ul",{className:"nav nav-tabs",children:[(0,t.jsx)("li",{className:"nav-item",children:(0,t.jsx)("a",{className:"nav-link active","data-bs-toggle":"tab",href:"#home",children:"Profil"})}),(0,t.jsx)("li",{className:"nav-item",children:(0,t.jsx)("a",{className:"nav-link","data-bs-toggle":"tab",href:"#profile",children:"Modifier"})}),(0,t.jsx)("li",{className:"nav-item",children:(0,t.jsx)("a",{className:"nav-link","data-bs-toggle":"tab",href:"#history",children:"Historique"})})]}),(0,t.jsxs)("div",{id:"myTabContent",className:"tab-content",children:[(0,t.jsx)("div",{className:"tab-pane fade active show",id:"home",children:(0,t.jsx)(N,{})}),(0,t.jsx)("div",{className:"tab-pane fade",id:"profile",children:(0,t.jsx)(b,{})}),(0,t.jsx)("div",{className:"tab-pane fade",id:"history",children:(0,t.jsx)(v.Z,{idUser:e.id})})]})]})}))}},function(e){e.O(0,[523,669,281,774,888,179],(function(){return s=7329,e(e.s=s);var s}));var s=e.O();_N_E=s}]);