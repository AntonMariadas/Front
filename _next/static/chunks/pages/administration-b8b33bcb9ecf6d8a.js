(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[450],{2946:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/administration",function(){return n(477)}])},98:function(e,t,n){"use strict";var s=n(5893),a=n(9669),c=n.n(a),r=n(7294),i=n(9531),o=n(7814),l=n(1436),d=n(4155);t.Z=function(e){var t=e.idUser,n=d.env.NEXT_PUBLIC_SPRINGBOOT_API,a=(0,r.useContext)(i.Z).authToken,h=(0,r.useState)([]),u=h[0],x=h[1],p=(0,r.useState)(!1),j=p[0],m=p[1];(0,r.useEffect)((function(){c().get("".concat(n,"/api/v1/accounts/").concat(t,"/history"),{headers:{Authorization:"Bearer ".concat(a)}}).then((function(e){return x(e.data)})).catch((function(e){return console.log(e)}))}),[j]);return(0,s.jsx)("div",{className:"table-responsive",children:(0,s.jsxs)("table",{className:"table table-hover",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{scope:"col",children:"Entreprise"}),(0,s.jsx)("th",{scope:"col",children:"Domaine"}),(0,s.jsx)("th",{scope:"col",children:"Profil"}),(0,s.jsx)("th",{scope:"col",children:"Siret"}),(0,s.jsx)("th",{scope:"col",children:"Adresse"}),(0,s.jsx)("th",{scope:"col",children:"Site"}),(0,s.jsx)("th",{scope:"col",children:"Candidat\xe9"}),(0,s.jsx)("th",{scope:"col",children:"Relanc\xe9"}),(0,s.jsx)("th",{scope:"col",children:"Action"})]})}),(0,s.jsx)("tbody",{children:u.map((function(e){return(0,s.jsxs)("tr",{className:"table-light",children:[(0,s.jsx)("th",{scope:"row",children:e.name}),(0,s.jsx)("td",{children:e.field}),(0,s.jsx)("td",{children:e.profile}),(0,s.jsx)("td",{children:e.siret}),(0,s.jsx)("td",{children:e.address.toLowerCase()}),(0,s.jsx)("td",{children:e.website?e.website:"Non communiqu\xe9"}),(0,s.jsx)("td",{className:"text-success",children:e.applicationDate}),(0,s.jsx)("td",{className:"text-danger",children:e.relaunchDate}),(0,s.jsx)("td",{children:(0,s.jsx)("button",{type:"button",className:"btn btn-outline-danger btn-sm",onClick:function(){return s=e.id,void c().delete("".concat(n,"/api/v1/accounts/").concat(t,"/history/").concat(s),{headers:{Authorization:"Bearer ".concat(a)}}).then((function(){return m(!j)})).catch((function(e){return console.log(e)}));var s},children:(0,s.jsx)(o.G,{icon:l.NBC})})})]},e.id)}))})]})})}},477:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return P}});var s=n(5893),a=n(9008),c=n(1436),r=n(7814),i=n(7294),o=n(9669),l=n.n(o),d=n(4155),h=function(){var e=d.env.NEXT_PUBLIC_NODEJS_API,t=(0,i.useState)([]),n=t[0],a=t[1],o=(0,i.useState)(!1);o[0],o[1];(0,i.useEffect)((function(){h()}),[]);var h=function(){l().get("".concat(e,"/api/companies")).then((function(e){return a(e.data)})).catch((function(e){return console.log(e)}))};return(0,s.jsx)("div",{className:"table-responsive",children:(0,s.jsxs)("table",{className:"table table-hover",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{scope:"col",children:"Entreprise"}),(0,s.jsx)("th",{scope:"col",children:"Domaine"}),(0,s.jsx)("th",{scope:"col",children:"Profil"}),(0,s.jsx)("th",{scope:"col",children:"Adresse"}),(0,s.jsx)("th",{scope:"col",children:"Taille"}),(0,s.jsx)("th",{scope:"col",children:"Siret"}),(0,s.jsx)("th",{scope:"col",children:"Contact"}),(0,s.jsx)("th",{scope:"col",children:"Alternance"}),(0,s.jsx)("th",{scope:"col",children:"Localisation"}),(0,s.jsx)("th",{scope:"col",children:"Note"})]})}),(0,s.jsx)("tbody",{children:n.map((function(e,t){return(0,s.jsxs)("tr",{className:"table-light",children:[(0,s.jsx)("th",{scope:"row",children:e.name}),(0,s.jsx)("td",{children:e.naf_text}),(0,s.jsx)("td",{children:e.matched_rome_label}),(0,s.jsx)("td",{children:e.address.toLowerCase()}),(0,s.jsx)("td",{children:e.headcount_text}),(0,s.jsx)("td",{children:e.siret}),(0,s.jsx)("td",{children:e.contact_mode}),(0,s.jsx)("td",{children:e.alternance?"Oui":"Non"}),(0,s.jsxs)("td",{children:[(0,s.jsx)("span",{className:"badge bg-primary rounded-pill",children:"lat"}),e.lat," ",(0,s.jsx)("br",{}),(0,s.jsx)("span",{className:"badge bg-primary rounded-pill",children:"lng"}),e.lon]}),(0,s.jsxs)("td",{className:"text-warning",children:[(0,s.jsx)(r.G,{icon:c.Tab})," ",e.stars]})]},t)}))})]})})},u=n(4155),x=function(e){var t=e.label,n=u.env.NEXT_PUBLIC_NODEJS_API,a=(0,i.useState)([]),o=a[0],d=a[1],h=(0,i.useState)(!1),x=h[0];h[1];(0,i.useEffect)((function(){p(t)}),[x]);var p=function(e){l().get("".concat(n,"/api/rome/").concat(e)).then((function(e){return d(e.data)})).catch((function(e){return console.log(e)}))};return(0,s.jsx)("div",{className:"table-responsive",children:(0,s.jsxs)("table",{className:"table table-hover",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{scope:"col",children:"Entreprise"}),(0,s.jsx)("th",{scope:"col",children:"Domaine"}),(0,s.jsx)("th",{scope:"col",children:"Profil"}),(0,s.jsx)("th",{scope:"col",children:"Adresse"}),(0,s.jsx)("th",{scope:"col",children:"Taille"}),(0,s.jsx)("th",{scope:"col",children:"Siret"}),(0,s.jsx)("th",{scope:"col",children:"Contact"}),(0,s.jsx)("th",{scope:"col",children:"Alternance"}),(0,s.jsx)("th",{scope:"col",children:"Localisation"}),(0,s.jsx)("th",{scope:"col",children:"Note"})]})}),(0,s.jsx)("tbody",{children:o.map((function(e,t){return(0,s.jsxs)("tr",{className:"table-light",children:[(0,s.jsx)("th",{scope:"row",children:e.name}),(0,s.jsx)("td",{children:e.naf_text}),(0,s.jsx)("td",{children:e.matched_rome_label}),(0,s.jsx)("td",{children:e.address.toLowerCase()}),(0,s.jsx)("td",{children:e.headcount_text}),(0,s.jsx)("td",{children:e.siret}),(0,s.jsx)("td",{children:e.contact_mode}),(0,s.jsx)("td",{children:e.alternance?"Oui":"Non"}),(0,s.jsxs)("td",{children:[(0,s.jsx)("span",{className:"badge bg-primary rounded-pill",children:"lat"}),e.lat," ",(0,s.jsx)("br",{}),(0,s.jsx)("span",{className:"badge bg-primary rounded-pill",children:"lng"}),e.lon]}),(0,s.jsxs)("td",{className:"text-warning",children:[(0,s.jsx)(r.G,{icon:c.Tab})," ",e.stars]})]},t)}))})]})})},p=n(9531),j=n(4155),m=function(e){var t=e.setSelectedUserId,n=e.setIsDisplayHistory,a=j.env.NEXT_PUBLIC_SPRINGBOOT_API,o=(0,i.useContext)(p.Z).authToken,d=(0,i.useState)([]),h=d[0],u=d[1],x=(0,i.useState)(!1),m=x[0],b=x[1];(0,i.useEffect)((function(){f()}),[m]);var f=function(){l().get("".concat(a,"/api/v1/accounts"),{headers:{Authorization:"Bearer ".concat(o)}}).then((function(e){return u(e.data)})).catch((function(e){return console.log(e)}))};return(0,s.jsx)("div",{className:"table-responsive",children:(0,s.jsxs)("table",{className:"table table-hover",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{scope:"col",children:"Id"}),(0,s.jsx)("th",{scope:"col",children:"Nom"}),(0,s.jsx)("th",{scope:"col",children:"Pr\xe9nom"}),(0,s.jsx)("th",{scope:"col",children:"Email"}),(0,s.jsx)("th",{scope:"col",children:"Adresse"}),(0,s.jsx)("th",{scope:"col",children:"G\xe9olocalisation"}),(0,s.jsx)("th",{scope:"col",children:"Profil"}),(0,s.jsx)("th",{scope:"col",children:"Role"}),(0,s.jsx)("th",{scope:"col",children:"Action"})]})}),(0,s.jsx)("tbody",{children:h.map((function(e){return(0,s.jsxs)("tr",{className:"table-light",children:[(0,s.jsx)("th",{scope:"row",children:e.id}),(0,s.jsx)("td",{children:e.lastName}),(0,s.jsx)("td",{children:e.firstName}),(0,s.jsx)("td",{children:e.email}),(0,s.jsxs)("td",{children:[e.number," ",e.road," ",(0,s.jsx)("br",{})," ",e.postCode," ",e.city]}),(0,s.jsxs)("td",{children:[(0,s.jsx)("span",{className:"badge bg-primary rounded-pill",children:"lat"})," ",e.latitude," ",(0,s.jsx)("br",{}),(0,s.jsx)("span",{className:"badge bg-primary rounded-pill",children:"lng"})," ",e.longitude]}),(0,s.jsx)("td",{children:e.profile.toUpperCase()}),(0,s.jsx)("td",{children:"USER"===e.role?(0,s.jsx)("button",{className:"btn btn-info btn-sm",children:e.role}):(0,s.jsx)("button",{className:"btn btn-success btn-sm",children:e.role})}),(0,s.jsxs)("td",{children:[(0,s.jsx)("button",{type:"button",className:"btn btn-outline-danger btn-sm",onClick:function(){t(e.id),n(!1)},children:(0,s.jsx)(r.G,{icon:c.m6i})}),(0,s.jsx)("button",{type:"button",className:"btn btn-outline-warning btn-sm",onClick:function(){t(e.id),n(!0)},children:(0,s.jsx)(r.G,{icon:c.xVw})}),(0,s.jsx)("button",{type:"button",className:"btn btn-outline-dark btn-sm",onClick:function(){return t=e.id,void l().delete("".concat(a,"/api/v1/accounts/").concat(t),{headers:{Authorization:"Bearer ".concat(o)}}).then((function(e){console.log(e),b(!m)})).catch((function(e){return console.log(e)}));var t},children:(0,s.jsx)(r.G,{icon:c.wOQ})}),"USER"===e.role?(0,s.jsx)("button",{type:"button",className:"btn btn-outline-success btn-sm",onClick:function(){return t=e.id,void l().put("".concat(a,"/api/v1/accounts/").concat(t,"/upgrade"),{},{headers:{Authorization:"Bearer ".concat(o)}}).then((function(){b(!m)})).catch((function(e){return console.log(e)}));var t},children:(0,s.jsx)(r.G,{icon:c.FKd})}):(0,s.jsx)("button",{type:"button",className:"btn btn-outline-info btn-sm",onClick:function(){return t=e.id,void l().put("".concat(a,"/api/v1/accounts/").concat(t,"/downgrade"),{},{headers:{Authorization:"Bearer ".concat(o)}}).then((function(){b(!m)})).catch((function(e){return console.log(e)}));var t},children:(0,s.jsx)(r.G,{icon:c.k9h})})]})]},e.id)}))})]})})},b=n(4155),f=function(e){var t=e.idUser,n=b.env.NEXT_PUBLIC_SPRINGBOOT_API,a=(0,i.useContext)(p.Z).authToken,o=(0,i.useState)([]),d=o[0],h=o[1],u=(0,i.useState)(!1),x=u[0],j=u[1];(0,i.useEffect)((function(){m(t)}),[x]);var m=function(e){l().get("".concat(n,"/api/v1/accounts/").concat(e,"/jobs"),{headers:{Authorization:"Bearer ".concat(a)}}).then((function(e){return h(e.data)})).catch((function(e){return console.log(e)}))};return(0,s.jsx)("div",{className:"table-responsive",children:(0,s.jsxs)("table",{className:"table table-hover",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{scope:"col",children:"Entreprise"}),(0,s.jsx)("th",{scope:"col",children:"Domaine"}),(0,s.jsx)("th",{scope:"col",children:"Adresse"}),(0,s.jsx)("th",{scope:"col",children:"Taille"}),(0,s.jsx)("th",{scope:"col",children:"Contact"}),(0,s.jsx)("th",{scope:"col",children:"Alternance"}),(0,s.jsx)("th",{scope:"col",children:"Localisation"}),(0,s.jsx)("th",{scope:"col",children:"Note"}),(0,s.jsx)("th",{scope:"col",children:"Favoris"}),(0,s.jsx)("th",{scope:"col",children:"Candidature"}),(0,s.jsx)("th",{scope:"col",children:"Action"})]})}),(0,s.jsx)("tbody",{children:d.map((function(e,i){return(0,s.jsxs)("tr",{className:"table-light",children:[(0,s.jsx)("th",{scope:"row",children:e.name}),(0,s.jsx)("td",{children:e.field}),(0,s.jsx)("td",{children:e.address.toLowerCase()}),(0,s.jsx)("td",{children:e.size}),(0,s.jsx)("td",{children:e.contactMode}),(0,s.jsx)("td",{children:e.alternance?"Oui":"Non"}),(0,s.jsxs)("td",{children:[(0,s.jsx)("span",{className:"badge bg-primary rounded-pill",children:"lat"}),e.latitude," ",(0,s.jsx)("br",{}),(0,s.jsx)("span",{className:"badge bg-primary rounded-pill",children:"lng"}),e.longitude]}),(0,s.jsxs)("td",{className:"text-warning",children:[(0,s.jsx)(r.G,{icon:c.Tab})," ",e.stars]}),(0,s.jsx)("td",{children:e.addedDate}),(0,s.jsxs)("td",{children:[(0,s.jsx)("span",{className:"text-success",children:e.applicationDate})," ",(0,s.jsx)("br",{}),(0,s.jsx)("span",{className:"text-danger",children:e.relaunchDate})]}),(0,s.jsx)("td",{children:(0,s.jsx)("button",{type:"button",className:"btn btn-outline-danger btn-sm",onClick:function(){return s=t,c=e.id,void l().delete("".concat(n,"/api/v1/accounts/").concat(s,"/jobs/").concat(c),{headers:{Authorization:"Bearer ".concat(a)}}).then((function(){return j(!x)})).catch((function(e){return console.log(e)}));var s,c},children:(0,s.jsx)(r.G,{icon:c.NBC})})})]},i)}))})]})})},g=n(1163);function N(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var v=function(e){return function(t){var n=(0,i.useContext)(p.Z),a=n.authToken,c=n.user,r=(0,g.useRouter)();return a&&"ADMIN"===c.role?(0,s.jsx)(e,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},s=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(s=s.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),s.forEach((function(t){N(e,t,n[t])}))}return e}({},t)):(r.replace("/"),null)}},_=n(98),w=n(5376),y=(n(1877),n(4155)),C=function(){var e=y.env.NEXT_PUBLIC_NODEJS_API,t=(0,i.useState)([]),n=t[0],a=t[1];(0,i.useEffect)((function(){c()}),[]);var c=function(){l().get("".concat(e,"/api/companies")).then((function(e){return a(e.data)})).catch((function(e){return console.log(e)}))},r={labels:n.map((function(e){return e.name})),datasets:[{label:"Entreprises par potentiel d'embauche",data:n.map((function(e){return e.stars})),backgroundColor:["lightblue"]}]};return(0,s.jsx)(w.$Q,{data:r})},E=n(4155),S=function(){var e=E.env.NEXT_PUBLIC_NODEJS_API,t=(0,i.useState)([]),n=t[0],a=t[1];(0,i.useEffect)((function(){c()}),[]);var c=function(){l().get("".concat(e,"/api/companies")).then((function(e){a(e.data)})).catch((function(e){return console.log(e)}))},r={labels:["administration","conseil","defense","direction","developpement","support","maintenance","production","redaction"],datasets:[{label:"Entreprises par domaine",data:[n.filter((function(e){return"Administration de syst\xe8mes d'information"===e.matched_rome_label})).length,n.filter((function(e){return"Conseil et ma\xeetrise d'ouvrage en syst\xe8mes d'information"===e.matched_rome_label})).length,n.filter((function(e){return"D\xe9fense et conseil juridique"===e.matched_rome_label})).length,n.filter((function(e){return"Direction des syst\xe8mes d'information"===e.matched_rome_label})).length,n.filter((function(e){return"\xc9tudes et d\xe9veloppement informatique"===e.matched_rome_label})).length,n.filter((function(e){return"Expertise et support en syst\xe8mes d'information"===e.matched_rome_label})).length,n.filter((function(e){return"Maintenance informatique et bureautique"===e.matched_rome_label})).length,n.filter((function(e){return"Production et exploitation de syst\xe8mes d'information"===e.matched_rome_label})).length,n.filter((function(e){return"R\xe9daction technique"===e.matched_rome_label})).length],backgroundColor:["LightBlue","LightPink","LemonChiffon","LightCoral","MediumPurple","LightSalmon","LightSeaGreen","RosyBrown","DarkGoldenRod"]}]};return(0,s.jsx)("div",{style:{maxWidth:700,margin:"auto"},children:(0,s.jsx)(w.by,{data:r})})},P=v((function(){var e=(0,i.useState)(0),t=e[0],n=e[1],c=(0,i.useState)(!0),r=c[0],o=c[1],l=(0,i.useState)(!1),d=l[0],u=l[1];return(0,i.useEffect)((function(){o(0===t)}),[t]),(0,s.jsxs)("div",{className:"my-5",children:[(0,s.jsx)(a.default,{children:(0,s.jsx)("title",{children:"Administration"})}),(0,s.jsxs)("section",{children:[(0,s.jsxs)("ul",{className:"nav nav-tabs",children:[(0,s.jsx)("li",{className:"nav-item",children:(0,s.jsx)("a",{className:"nav-link active","data-bs-toggle":"tab",href:"#users",onClick:function(){return n(0)},children:"Utilisateurs"})}),(0,s.jsxs)("li",{className:"nav-item dropdown",children:[(0,s.jsx)("a",{className:"nav-link dropdown-toggle","data-bs-toggle":"dropdown",href:"#",role:"button","aria-haspopup":"true","aria-expanded":"false",children:"Entreprises"}),(0,s.jsxs)("div",{className:"dropdown-menu",children:[(0,s.jsx)("a",{className:"dropdown-item","data-bs-toggle":"tab",href:"#administration",children:"Administration de syst\xe8mes d'information"}),(0,s.jsx)("a",{className:"dropdown-item","data-bs-toggle":"tab",href:"#consultant",children:"Conseil et ma\xeetrise d'ouvrage en syst\xe8mes d'information"}),(0,s.jsx)("a",{className:"dropdown-item","data-bs-toggle":"tab",href:"#defense",children:"D\xe9fense et conseil juridique"}),(0,s.jsx)("a",{className:"dropdown-item","data-bs-toggle":"tab",href:"#direction",children:"Direction des syst\xe8mes d'information"}),(0,s.jsx)("a",{className:"dropdown-item","data-bs-toggle":"tab",href:"#developpement",children:"Etudes et d\xe9veloppement informatique"}),(0,s.jsx)("a",{className:"dropdown-item","data-bs-toggle":"tab",href:"#support",children:"Expertise et support en syst\xe8mes d'information"}),(0,s.jsx)("a",{className:"dropdown-item","data-bs-toggle":"tab",href:"#maintenance",children:"Maintenance informatique et bureautique"}),(0,s.jsx)("a",{className:"dropdown-item","data-bs-toggle":"tab",href:"#production",children:"Production et exploitation de syst\xe8mes d'information"}),(0,s.jsx)("a",{className:"dropdown-item","data-bs-toggle":"tab",href:"#redaction",children:"R\xe9daction technique"}),(0,s.jsx)("div",{className:"dropdown-divider"}),(0,s.jsx)("a",{className:"dropdown-item","data-bs-toggle":"tab",href:"#entreprises",children:"Toutes les entreprises"})]})]}),(0,s.jsxs)("li",{className:"nav-item dropdown",children:[(0,s.jsx)("a",{className:"nav-link dropdown-toggle","data-bs-toggle":"dropdown",href:"#",role:"button","aria-haspopup":"true","aria-expanded":"false",children:"Graphiques"}),(0,s.jsxs)("div",{className:"dropdown-menu",children:[(0,s.jsx)("a",{className:"dropdown-item","data-bs-toggle":"tab",href:"#bar",children:"Entreprises par domaine"}),(0,s.jsx)("a",{className:"dropdown-item","data-bs-toggle":"tab",href:"#pie",children:"Entreprises par potentiel d'embauche"})]})]})]}),(0,s.jsxs)("div",{id:"myTabContent",className:"tab-content",children:[(0,s.jsxs)("div",{className:"tab-pane fade active show",id:"users",children:[r&&(0,s.jsx)(m,{setSelectedUserId:n,setIsDisplayHistory:u}),!r&&!d&&(0,s.jsx)(f,{idUser:t}),!r&&d&&(0,s.jsx)(_.Z,{idUser:t})]}),(0,s.jsx)("div",{className:"tab-pane fade",id:"entreprises",children:(0,s.jsx)(h,{})}),(0,s.jsx)("div",{className:"tab-pane fade",id:"administration",children:(0,s.jsx)(x,{label:"administration"})}),(0,s.jsx)("div",{className:"tab-pane fade",id:"consultant",children:(0,s.jsx)(x,{label:"consultant"})}),(0,s.jsx)("div",{className:"tab-pane fade",id:"defense",children:(0,s.jsx)(x,{label:"defense"})}),(0,s.jsx)("div",{className:"tab-pane fade",id:"direction",children:(0,s.jsx)(x,{label:"direction"})}),(0,s.jsx)("div",{className:"tab-pane fade",id:"developpement",children:(0,s.jsx)(x,{label:"developpement"})}),(0,s.jsx)("div",{className:"tab-pane fade",id:"support",children:(0,s.jsx)(x,{label:"support"})}),(0,s.jsx)("div",{className:"tab-pane fade",id:"maintenance",children:(0,s.jsx)(x,{label:"maintenance"})}),(0,s.jsx)("div",{className:"tab-pane fade",id:"production",children:(0,s.jsx)(x,{label:"production"})}),(0,s.jsx)("div",{className:"tab-pane fade",id:"redaction",children:(0,s.jsx)(x,{label:"redaction"})}),(0,s.jsx)("div",{className:"tab-pane fade",id:"bar",children:(0,s.jsx)(S,{})}),(0,s.jsx)("div",{className:"tab-pane fade",id:"pie",children:(0,s.jsx)(C,{})})]})]})]})}))}},function(e){e.O(0,[523,570,669,39,774,888,179],(function(){return t=2946,e(e.s=t);var t}));var t=e.O();_N_E=t}]);