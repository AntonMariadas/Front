(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[845],{3428:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/favoris",function(){return t(8111)}])},2949:function(e,n,t){"use strict";var a=t(5893),c=t(1163),r=t(7294),i=t(9531);function s(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}n.Z=function(e){return function(n){var t=(0,r.useContext)(i.Z).authToken,o=(0,c.useRouter)();return t?(0,a.jsx)(e,function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},a=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),a.forEach((function(n){s(e,n,t[n])}))}return e}({},n)):(o.replace("/"),null)}}},8111:function(e,n,t){"use strict";t.r(n);var a=t(5666),c=t.n(a),r=t(5893),i=t(9669),s=t.n(i),o=t(9008),l=t(7294),d=t(9531),u=t(7814),p=t(1436),h=t(6876),b=(t(9318),t(381)),m=t.n(b),f=t(2949),x=t(4155);function j(e,n,t,a,c,r,i){try{var s=e[r](i),o=s.value}catch(l){return void t(l)}s.done?n(o):Promise.resolve(o).then(a,c)}n.default=(0,f.Z)((function(){var e=(0,l.useContext)(d.Z),n=e.user,t=e.authToken,a=x.env.NEXT_PUBLIC_SPRINGBOOT_API,i=(0,l.useState)([]),b=i[0],f=i[1],v=(0,l.useState)(!1),N=v[0],g=v[1],y=(0,l.useState)(!1),w=y[0],D=y[1],k=(0,l.useState)(0),C=k[0],_=k[1],O=(0,l.useState)(new Date),P=O[0],S=O[1],B=(0,l.useState)(!1),E=B[0],A=B[1],T={weekday:"long",year:"numeric",month:"long",day:"numeric"};(0,l.useEffect)((function(){s().get("".concat(a,"/api/v1/accounts/").concat(n.id,"/jobs"),{headers:{Authorization:"Bearer ".concat(t)}}).then((function(e){f(e.data)})).catch((function(e){return console.log(e)}))}),[N]);var z,G=function(e){s().delete("".concat(a,"/api/v1/accounts/").concat(n.id,"/jobs/").concat(e),{headers:{Authorization:"Bearer ".concat(t)}}).then((function(){return g(!N)})).catch((function(e){return console.log(e)}))},R=function(e){D(!w),_(e)},Z=(z=c().mark((function e(r){var i,o,l;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s().get("".concat(a,"/api/v1/accounts/").concat(n.id,"/jobs/").concat(r),{headers:{Authorization:"Bearer ".concat(t)}});case 2:if(i=e.sent,(o=i.data).applicationDate&&""!==o.applicationDate&&o.relaunchDate&&""!==o.relaunchDate){e.next=9;break}return A(!0),_(r),setTimeout((function(){A(!1)}),3e3),e.abrupt("return");case 9:l={name:o.name,identifier:o.identifier,field:o.field,profile:o.profile,siret:o.siret,website:o.website,address:o.address,applicationDate:o.applicationDate,relaunchDate:o.relaunchDate},s().post("".concat(a,"/api/v1/accounts/").concat(n.id,"/history"),l,{headers:{Authorization:"Bearer ".concat(t)}}).then((function(){return G(r)})).catch((function(e){return console.log(e)}));case 11:case"end":return e.stop()}}),e)})),function(){var e=this,n=arguments;return new Promise((function(t,a){var c=z.apply(e,n);function r(e){j(c,t,a,r,i,"next",e)}function i(e){j(c,t,a,r,i,"throw",e)}r(void 0)}))});return(0,r.jsxs)("div",{className:"py-5 text-center",children:[(0,r.jsx)(o.default,{children:(0,r.jsx)("title",{children:"Favoris"})}),(0,r.jsx)("section",{className:"my-5",children:b.map((function(e){return(0,r.jsx)("div",{className:"accordion",id:"accordionExample",children:(0,r.jsxs)("div",{className:"accordion-item",children:[(0,r.jsx)("h2",{className:"accordion-header",id:"heading".concat(e.id),children:(0,r.jsxs)("button",{className:"accordion-button",type:"button","data-bs-toggle":"collapse","data-bs-target":"#collapse".concat(e.id),"aria-expanded":"true","aria-controls":"collapse".concat(e.id),children:[e.name," - ajout\xe9 le ",e.addedDate]})}),(0,r.jsx)("div",{id:"collapse".concat(e.id),className:"accordion-collapse collapse show","aria-labelledby":"heading".concat(e.id),"data-bs-parent":"#accordionExample",children:(0,r.jsxs)("div",{className:"accordion-body",children:[(0,r.jsxs)("h5",{className:"text-muted",children:[e.field," | ",e.profile]}),(0,r.jsx)("span",{className:"badge bg-dark",children:"Adresse"}),(0,r.jsx)("h6",{children:e.address}),(0,r.jsx)("span",{className:"badge bg-dark",children:"Contact"}),(0,r.jsx)("h6",{children:e.contactMode}),(0,r.jsxs)("p",{children:[(0,r.jsx)("span",{className:"badge rounded-pill alert-primary",children:"Alternance"})," ",e.alternance?"Oui":"Non"]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("span",{className:"badge rounded-pill alert-primary",children:"Siret"})," ",e.siret]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("span",{className:"badge rounded-pill alert-primary",children:"Taille"})," ",e.size]}),(0,r.jsxs)("p",{className:"text-warning",children:[(0,r.jsx)("span",{className:"badge rounded-pill alert-primary",children:"Note"}),e.stars," ",(0,r.jsx)(u.G,{icon:p.Tab})]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("span",{className:"badge rounded-pill alert-primary",children:"Site web"}),e.website?(0,r.jsx)("a",{href:e.website,target:"blank",children:e.website}):"Non communiqu\xe9"]}),e.applicationDate&&(0,r.jsxs)("p",{className:"text-primary fw-bold",children:[(0,r.jsx)("span",{className:"badge rounded-pill alert-primary",children:"Candidat\xe9"})," ",e.applicationDate,(0,r.jsxs)("button",{type:"button",className:"btn btn-outline btn-sm",onClick:function(){return c=e.id,void s().put("".concat(a,"/api/v1/accounts/").concat(n.id,"/jobs/").concat(c,"/unapply"),{applicationDate:""},{headers:{Authorization:"Bearer ".concat(t)}}).then((function(){g(!N)})).catch((function(e){return console.log(e)}));var c},children:[" ",(0,r.jsx)(u.G,{icon:p.xf2})]})]}),e.relaunchDate&&(0,r.jsxs)("p",{className:"text-danger fw-bold",children:[(0,r.jsx)("span",{className:"badge rounded-pill alert-danger",children:"Relance"})," ",e.relaunchDate]}),w&&C==e.id&&(0,r.jsx)("div",{className:"d-flex justify-content-center mt-3",children:(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"calendar-container",children:(0,r.jsx)(h.ZP,{onChange:S,value:P,maxDate:new Date})}),(0,r.jsxs)("p",{className:"text-center text-primary fw-bold",children:[P.toLocaleDateString("fr-FR",T),(0,r.jsx)("button",{className:"btn btn-primary btn-sm mx-3",onClick:function(){return function(e){R(e),_(e);var c={applicationDate:m()(P).format("DD-MM-YYYY")};s().put("".concat(a,"/api/v1/accounts/").concat(n.id,"/jobs/").concat(e),c,{headers:{Authorization:"Bearer ".concat(t)}}).then((function(){g(!N)})).catch((function(e){return console.log(e)}))}(e.id)},children:"OK"})]})]})}),(0,r.jsxs)("div",{className:"btn-group mt-2",role:"group","aria-label":"Basic example",children:[(0,r.jsx)("button",{type:"button",className:"btn btn-outline-danger btn-sm",onClick:function(){return G(e.id)},children:(0,r.jsx)(u.G,{icon:p.NBC})}),(0,r.jsx)("button",{type:"button",className:"btn btn-outline-success btn-sm",onClick:function(){return R(e.id)},children:(0,r.jsx)(u.G,{icon:p.IV4})}),(0,r.jsx)("button",{type:"button",className:"btn btn-outline-info btn-sm",onClick:function(){return Z(e.id)},children:(0,r.jsx)(u.G,{icon:p.Ry6})})]}),E&&C==e.id&&(0,r.jsxs)("div",{className:"alert alert-dismissible alert-danger text-center my-0",children:[(0,r.jsx)("strong",{children:"La candidature et la relance doivent \xeatre compl\xe8tes "}),(0,r.jsx)(u.G,{icon:p.NBC})]})]})})]})},e.id)}))})]})}))}},function(e){e.O(0,[523,885,669,519,774,888,179],(function(){return n=3428,e(e.s=n);var n}));var n=e.O();_N_E=n}]);